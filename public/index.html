<!DOCTYPE html>
<html>
	<head>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script> 
	</head>

	<body>
		<div id="app">
			<label for="fname">h:</label>
			<input type="text" v-model="h" /><br /><br />
			<label for="fname">dLx:</label>
			<input type="text" v-model="dLx" /><br /><br />
			<label for="fname">N:</label>
			<input type="text" v-model="N" /><br /><br />
			<input type="submit" value="Submit" @click="Solve" />
		</div>
		<div id = "paper"> </div>
		<script>
			var app = new Vue({
				el: '#app',
				data: function () {
					return {
						h: 1.5,
						dLx: 1.0,
						N: 2,
						X: [1, 4, 5, 7],
						Y: [5, -3, 5, 7],
					};
				},
				methods: {
					Solve: function () {
						var { h, dLx, N } = this;

						axios.post('/truss2D/solve', { h, dLx, N }).then(function (res) {

							console.log(res.data);

							// Creates canvas 500 Ã— 500 at 200, 10
							var paper = Raphael(200, 10, 500, 500);
							
							//defines first point
							var fp = [100,80,130,20,160,80,190];

							var k = 1;
							for (var i = 0; i < N; i++) {
								fp[0] += k*60;
								fp[2] += k*60;
								fp[4] += k*60;
								var line = paper.path(`M${fp[0]} ${fp[1]} L${fp[2]} ${fp[3]} ${fp[4]} ${fp[5]} ${fp[0]} ${fp[1]}`);
								//lines[i] = paper.path("M100 80 L130 20 160 80 100 80");
								if (i >= 0.5) {
									var line = paper.path(`M${fp[2]} ${fp[3]} L${fp[6]} ${fp[3]}`);	
								}
							}
							
						});

					},
				},

				watch: {
					h: function (n, o) {
						console.log('h:', n);
					},
				},
			});


			// function visual(N){
			// 	var {N} = this;
			// 	console.log('N:',N);
			// }
			
			/*
			var line = paper.path("M160 80 L190 20 220 80 160 80");
			var line = paper.path("M130 20 L190 20")*/
		</script>
	</body>
</html>
